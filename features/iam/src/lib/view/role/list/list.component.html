<page-header></page-header>
<mat-drawer-container style="height: calc(100% - 96px)">
  <mat-drawer #drawer class="example-sidenav" mode="over" position="end" disableClose="true" autoFocus="false">
    <button type="button" mat-button (click)="drawer.toggle()">
      <mat-icon>close</mat-icon>
    </button>
    <form (ngSubmit)="this[action](drawer)">
      <formly-form [model]="model" [fields]="action === 'create' ? roleCreateFields : roleEditFields" [form]="form" [options]="options" class="p-y-24 info-fields">
      </formly-form>
      <button type="submit" mat-raised-button color="primary" [disabled]="!form.valid">Submit</button>
    </form>
  </mat-drawer>

  <button type="button" mat-raised-button color="primary" (click)="changeAction('create', {}, drawer)">新建</button>
  <table mat-table [dataSource]="data">
    <!-- 列定义 -->
    <ng-container matColumnDef="roleCode">
      <th mat-header-cell *matHeaderCellDef>角色编码</th>
      <td mat-cell *matCellDef="let role">{{ role.roleCode }}</td>
    </ng-container>

    <ng-container matColumnDef="roleName">
      <th mat-header-cell *matHeaderCellDef>角色名称</th>
      <td mat-cell *matCellDef="let role">{{ role.roleName }}</td>
    </ng-container>
    <ng-container matColumnDef="enabledFlag">
      <th mat-header-cell *matHeaderCellDef>是否启用</th>
      <td mat-cell *matCellDef="let role">{{ role.enabledFlag }}</td>
    </ng-container>
    <ng-container matColumnDef="remark">
      <th mat-header-cell *matHeaderCellDef>备注</th>
      <td mat-cell *matCellDef="let role">{{ role.remark }}</td>
    </ng-container>
    <ng-container matColumnDef="operations">
      <th mat-header-cell *matHeaderCellDef>操作 </th>
      <td mat-cell *matCellDef="let role">
        <button mat-button type="button" (click)="changeAction('update', role, drawer)">编辑</button>
      </td>
    </ng-container>
    <!-- 列绑定 -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let user; columns: displayedColumns"></tr>
  </table>
</mat-drawer-container>
